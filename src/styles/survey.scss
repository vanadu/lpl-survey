@import './variables.scss';

// !VA Landing Page
// !VA Version info

// 

[data-name="LandingTestPanel"] {
  // display: none;t
}


.landing-survey-test {
  padding: 0!important;
  margin: 0!important;
  font-family: $secondary_font!important;
  color: #353535!important;
  font-size: .913rem!important;
  line-height: 1.25rem!important;
}

.landing-survey-version-container {
  display: flex;
  justify-content: right;
  margin-right: 40px;
}

.landing-survey-version {
  font-family: $secondary_font!important;
  color: #353535!important;
  font-size: .913rem!important;
  line-height: 1.25rem!important;
}

// !VA Landing Intro subhead
.landing-title-subhead {
  font-family: $primary_font!important;
  padding: 0!important;
  margin: .25rem 0 0 0!important;
  color: #6b6b6b!important;
  font-size: 1.313rem!important;
  line-height: 1.75rem!important;
  font-weight: 600!important;
}

.survey-dropdown {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  width: 200px;
  font-family: inherit;
}

.survey-dropdown__button {
  padding: 10px 16px;
  background: #f5f6fa;
  border: 1px solid #dcdde1;
  cursor: pointer;
  border-radius: 4px;
  text-align: left;
  transition: background 0.2s;
}

.survey-dropdown__button:hover {
  background: #e1e6f0;
}

.survey-dropdown__list {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  flex-direction: column;
  width: 100%;
  margin: 4px 0 0 0;
  padding: 0;
  list-style: none;
  background: #fff;
  border: 1px solid #dcdde1;
  border-radius: 4px;
  box-shadow: 0 8px 16px rgba(44, 62, 80, 0.06);
  z-index: 10;
}

.survey-dropdown:hover .survey-dropdown__list {
  display: flex;
}

.survey-dropdown__item {
  padding: 10px 16px;
  cursor: pointer;
  transition: background 0.18s;
}

.survey-dropdown__item:hover {
  background: #e1e6f0;
}


// !VA Survey body
// -------------------------------------------------------------------------
// !VA  -- background, top and bottom padding, margins, max-width, centered with margin: 0 by default
.survey-wrapper .sd-body.sd-body--static {
  // !VA Width does nothing.
  // width: 1000px!important;
  // !VA 720 by default, probably for tablets
  max-width: 1000px;
  // !VA Mod 6->3, 10 -> 6
  padding-top: calc(3 * (var(--sjs-base-unit, var(--base-unit, 8px)))) !important;
  padding-bottom: calc(6 * (var(--sjs-base-unit, var(--base-unit, 8px)))) !important;
  
  @include sphone {
    padding: 4px 0 10px !important;
    margin-top: -6px !important;
  }
}

// !VA This is the actual survey title property at the top of the master-survey JSON
.sd-container-modern__title {
  padding: 0!important;
  margin: 0!important;
  .sd-header__text {
    height: 20px !important;
  }
  .sd-title {
    font-size: 1rem !important;
    line-height: 1.25rem !important;
    text-align: center;
  }
}

// !VA Survey container - background color is inherited from survey-wrapper
// ----------------------------------------------------------
.sd-container-modern {
    background: $home_bg_color;
}

// !VA 2025.12.19 This applies to ALL panels, not just the top-level
// !VA Top panel margin, i.e. directly above the introHeading
.survey-wrapper .sd-panel__content {
  // --sd-base-padding: calc(5 * var(--sjs-base-unit, var(--base-unit, 8px)));
  --sd-base-padding: calc(3 * var(--sjs-base-unit, var(--base-unit, 8px)));
}

// !VA 2025.12.19 OK for now
// !VA sets row top margins, does not set padding, bottom margins
.survey-wrapper .sd-row {
  // --sd-base-vertical-padding: calc(1 * var(--sjs-base-unit, var(--base-unit, 8px)));
  --sd-base-vertical-padding: calc(2* var(--sjs-base-unit, var(--base-unit, 8px)));
}


// !VA 2025.12.19 OK
// !VA Input and dropdown height
// ------------------------------
// !VA Height of input fields: this makes input fields shorter than the default
.survey-wrapper .sd-input {
  // padding: calc(1.5 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));
  padding: calc(.75 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));
}

// !VA Set top and bottom padding on dropdowns 0 to match the shorter input height. Leave the horizontal padding base units.
.survey-wrapper .sd-dropdown {
    padding: calc(0 * (var(--sjs-base-unit, var(--base-unit, 8px)))) calc(2 * (var(--sjs-base-unit, var(--base-unit, 8px))));
}

// !VA Adjust the top and bottom paddings on ALL panel headers. That's going to be a problem later, probably.
// !VA ONLY APPLIES TO PANELS WITH TITLE PROPERTIES!
.sd-panel__header {
    // padding: 0!important;
    // margin: 0!important;
    padding-top: 16px!important;
    padding-bottom: 0!important;
}


// !VA Selects all element headers but doesn't appear to do anything
.sd-element__header--location-top {
  // padding-bottom: calc(0 * var(--sd-base-vertical-padding));
  // background: rgba(0, 0, 255, .3) !important; //devblue
}

// !VA Clear the bottom border in the subpanel title 
.sd-panel__header::after { 
  content: none !important;
  display: none !important;
  border: none !important;
  background: none !important;
  height: 0 !important;
  margin: 0 !important;
}

// !VA Sets the padding between the switch and the outer border
.survey-wrapper .sd-boolean {
  // padding: calc(0.5 * (var(--sjs-base-unit, var(--base-unit, 8px))));
  padding: calc(0.25 * (var(--sjs-base-unit, var(--base-unit, 8px))));
}

// !VA Sets the height of the boolean element
.survey-wrapper .sd-boolean__label, .survey-wrapper .sd-boolean__thumb {
  // line-height: calc(.5 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));
  line-height: calc(1 * (var(--sjs-font-editorfont-size, var(--sjs-font-size, 16px))));
}

// !VA 2025.12.19 
// !VA sd-html element overrides.
// -------------------------------
.survey-wrapper .sd-html h2 {
  font-family: $secondary_font;
  font-size: var(--sjs-article-font-x-large-fontSize, calc(1.875 * (var(--sjs-font-size, 16px))));
  line-height: calc(2.125 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));
}

// !VA OVERRIDES default h3 for sd-html elements.
.survey-wrapper .sd-html h3 {
  font-family: $secondary_font;
  font-size: var(--sjs-article-font-x-large-fontSize, calc(1.5 * (var(--sjs-font-size, 16px))));
  line-height: calc(1.75 * (var(--sjs-font-questiontitle-size, var(--sjs-font-size, 16px))));
}

// !VA OVERRIDES default p for sd-html elements
.survey-wrapper .sd-html {
  p, li {
      font-size: 1.125rem;
      line-height: 1.613rem;
      padding-bottom: .5rem !important;
  }
  li {
    margin-left: 1.5rem;
  }
}

// !VA INFO icons and links
// --------------------------
// !VA .srvy-general-info is the div wrapper that lives inside the HTML element for general info, i.e. info that's not attached to a question label.
.survey-wrapper .srvy-general-info {
  // !VA Defaults
}

.survey-wrapper .srvy-info-icon {
  width: 16px;
  height: 16px;
  vertical-align: -2px;
}

.survey-wrapper .srvy-info-link {
  font-size: 1rem;
  color: #B70B0C;
  font-weight: 600;
  text-decoration: none;
}

// !VA Position info label on inputs or other question elements absolutely and move it down 18px. .srvy-input-info is the div wrapper that lives inside the HTML element.
// !VA IMPORTANT -- not sure if this is doing to work.
.survey-wrapper .srvy-question-info {
  position: absolute;
  bottom: -16px;
}

.survey-wrapper .srvy-question-info .srvy-info-icon {
  width: 14px;
  height: 14px;
  vertical-align: -3px;
}

.survey-wrapper .srvy-question-info .srvy-info-link {
  font-size: .813rem;
  color: #B70B0C;
  font-weight: bold;
  text-decoration: none;
}


// --- Typography tokens ---
// !VA I don't know what this does or where it came from 
.survey-panel-title {
  .sd-panel__title,
  .sd-title {
    font-weight: 600;
    font-size: 1.05rem;
    margin-bottom: 0.25rem;
  }
}


/* Apply to fieldset.sd-selectbase */
.survey-two-col {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem 1rem;
  /* fieldset reset */
  border: 0;
  padding: 0;
  margin: 0;
  min-width: 0;
  // background: rgba(0, 0, 255, .3) !important; //devblue
}

// !VA Two column checkboxes
.survey-two-col > .sd-item {
  // !VA Width of the boolean radios
  flex: 0 0 calc(45% - 0.5rem); /* 0.5rem is half of the column gap (1rem) */
  box-sizing: border-box;
}
// !VA Two column boolean radio buttons, creates a 60% width element
.survey-two-col .sd-item.sd-radio {
  // !VA Width of the boolean radios
  flex: 0 0 calc(30% - 0.5rem); /* 0.5rem is half of the column gap (1rem) */
  box-sizing: border-box;
  // background: rgba(255, 255, 0, .3) !important; //devyel
}

// Apply to fieldset.sd-selectbase so titles/headers are unaffected
// !VA This only applies to three-button radio groups, i.e. Yes No Don't know
.survey-three-col {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem 1rem;

  // fieldset reset (since target is a fieldset)
  border: 0;
  padding: 0;
  margin: 0;
  min-width: 0;
  // !VA Creates a 480px element with three equal button widths
  .sd-radio {
    max-width: 160px!important;
  }
}
// !VA I'm not sure what this does
.survey-three-col > .sd-item {
  flex: 1 1 14rem; // ~3 columns depending on available width
}

// !VA NOT USED
.survey-fieldset-w-60pct { 
  width: 60%; 
  // background: rgba(0, 128, 0, .3) !important; //devgreen
}

// !VA 
.survey-fieldset-w-300 { 
  width: 300px; 
}

// !VA Medium width text boxes and dropdown, i.e. CmpnName, UserInfoAgeGroup. 
.survey-control-w-300 { 
  width: 300px !important; 
  // background: rgba(0, 128, 0, .3) !important; //devgreen
}

// !VA Wide text boxes and dropdowns
.survey-control-w-600 { 
  width: 600px !important; 
  // background: rgba(255, 0, 255, .3) !important; //devmag
}

// !VA Unused as yet
.survey-control-w-200 { 
  width: 200px!important;

}

// !VA Unused as yet
.survey-control-w-150 { 
  width: 150px!important;

}
// !VA Unused as yet
// great for 3-digit-ish fields
.survey-control-w-6ch { 
  width: 6ch!important; 
}


// !VA Apply border-box to all control elements
.survey-control-w-200,
.survey-control-w-300,
.survey-control-w-600,
.survey-control-w-6ch { box-sizing: border-box; }


.survey-q-separator {
  position: relative;
  padding: 0; // no padding, spacing goes around the ::after
  // background: rgba(255, 0, 0, .3) !important; //devred
}

.survey-q-separator-below::after {
  content: "";
  display: block;
  width: 600px;
  height: 1px;
  margin: 1.25rem auto 0; // centers horizontally
  background: rgba(0, 0, 0, 0.05);
}

.survey-q-space-below::after {
  content: "";
  display: block;
  width: 600px;
  height: 1px;
  margin: .75rem auto 0; // centers horizontally
  // background: rgba(0, 0, 0, 0.05);
}


// !VA Custom Panel Layouts
// =============================

// !VA INFO ICONSThis is probably going to have to be where all the info icon links are styled because I have no idea how to get that into the formatting helper. 
[data-name="LandingPrivacyConsentLinksPanel"] .sd-element__content.sd-panel__content {
  display: flex;
  width: 80%;
  padding: 0!important;
  margin: 0!important;
  .sd-row {
    padding: 0!important;
    margin: 0!important;
  }
}

// !VA AGE PANELS
[data-name="dcsdCmpnInfoAgePanel"],
[data-name="EarlySymptomsFirstSignsPanel"],
[data-name="PrimaryDurationFirstConsult"],
[data-name="TreatmentStatusAgePanel"],


 {
  .sd-element__content.sd-panel__content {
    .sd-row {
      width: 250px!important;
        padding: 0!important;
        margin: 0!important;
      // background: rgba(255, 255, 0, .3) !important; //devyel
    }
  }
}



[data-name="UserInfoAboutPanel"] .sd-element__content.sd-panel__content {
  display: grid;
  gap: 0.75rem 1rem;
  align-items: start;
  grid-template-columns: 1fr 1fr;
  .sd-row {
    padding: 0!important;
    margin: 0!important;
  }
}

[data-name="CmpnInfoDetailsPanel"] .sd-element__content.sd-panel__content {
  display: grid;
  gap: 0.25rem 1rem;
  align-items: start;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  grid-auto-flow: row;

  // make first child span both columns
  > :first-child {
    grid-column: 1 / -1;
  }
}

[data-name="dcsdCmpnInfoAgePanel"] .sd-element__content.sd-panel__content,
[data-name="lvngCmpnInfoAgePanel"] .sd-element__content.sd-panel__content,
[data-name="EarlySymptomsFirstSignsPanel"] .sd-element__content.sd-panel__content,
[data-name="PrimaryDurationFirstConsult"] .sd-element__content.sd-panel__content,
[data-name="TreatmentStatusAgePanel"] .sd-element__content.sd-panel__content
{
  display: flex;
  .sd-row {
    padding: 0!important;
    margin: 0!important;
  }
}

// !VA This is to force two-column radiogroups to two columns
[data-name="ConclusionCauseOfDeath"] .sd-selectbase.survey-two-col {
  .sd-item.sd-radio {
    flex: 0 0 calc(45% - 0.5rem); /* 0.5rem is half of the column gap (1rem) */
    box-sizing: border-box;
  }
}

[data-name="ConclusionDifferentChoices"]  {
  width: 700px!important;
}


// !VA SUCCESS page

.container-flex-center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

// !VA Content styles
// !VA This is the H1 that matches with the title tag
.main-head {
  @include mphone {
    padding-bottom: .25rem;
    font-size: $mphoneXXLFontSize;
    line-height: $mphoneXLLineHeight; 
  }
  @include lphone {
    padding: 1rem 0 .313rem;
    font-size: $lphoneXXLFontSize;
    line-height: $lphoneXLLineHeight; 
  }
  @include tablet {
    padding: 1rem 0 .25rem;
    font-size: $tabletXXLFontSize;
    line-height: $tabletXLLineHeight
  }
  @include desktop {
    padding: 1.25rem 0 .25rem;
    font-size: $desktopXXLFontSize;
    line-height: $desktopXLLineHeight
  }
  @include ldesktop {
    padding: 1.25rem 0 .5rem;
    font-size: $ldesktopXXLFontSize;
    line-height: $ldesktopXLLineHeight
  }
  margin: 0 0 .25rem;
  color: $dark_text_color;
  font-family: $secondary_font;
  font-size: $rootXXLFontSize;
  line-height: $rootXLLineHeight; 
  font-weight: 500;
  text-align: center;
}

.success-icon {
  @include lphone {
    width: 100px;
    margin-bottom: .5rem;
  }
  @include tablet {
    width: 110px;
    margin-bottom: .75rem;
  }
  @include desktop {
    width: 110px;
    margin-bottom: .75rem;
  }
  @include ldesktop {
    width: 136px;
    margin-bottom: 1.25rem;
  }
  position: relative;
  width: 80px;
  height: auto;
  margin-bottom: .25rem;
  // !VA 2024
  z-index: 100;
}


.content-text {
  @include mphone {
    margin: .188rem 0 .313rem;
    font-size: $mphoneLargeFontSize;
    line-height: $mphoneLargeLineHeight;
  }
  @include lphone {
    margin: .25rem 0 .375rem;
    font-size: $lphoneLargeFontSize;
    line-height: $lphoneLargeLineHeight;
  }
  @include tablet {
    margin: .313rem 0 .375rem;
    font-size: $tabletLargeFontSize;
    line-height: $tabletLargeLineHeight;
  }
  @include desktop {
    font-size: $desktopLargeFontSize;
    line-height: $desktopLargeLineHeight;
  }
  @include ldesktop {
    font-size: $ldesktopLargeFontSize;
    line-height: $ldesktopLargeLineHeight;
  }
  // padding: .5rem 0 0 0;
  margin: .125rem 0 .25rem;
  font-family: $primary_font;
  color: $dark_text_color;
  font-size: $rootLargeFontSize;
  line-height: $rootLargeLineHeight;
  font-weight: 400;
  text-align: left;
}

.survey-spacer {
  height: 300px;
}


// !VA Survey Submission Spinner

.success-stage {
  position: relative;
}



.success-spinnerWrap,
.success-contentWrap {
  transition: opacity 260ms ease, transform 260ms ease;
  will-change: opacity, transform;
}

/* Spinner starts visible */
.success-spinnerWrap {
  opacity: 1;
  transform: translateY(0);
}

/* When done, fade spinner out + make it non-interactive */
.success-spinnerWrap.isHidden {
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
  position: absolute; /* prevents layout jump during crossfade */
  background: rgba(255, 0, 0, .3) !important; //devred

}

/* Content starts hidden */
.success-contentWrap {
  opacity: 0;
  transform: translateY(6px);
}

/* When done, fade content in */
.success-contentWrap.isVisible {
  opacity: 1;
  transform: translateY(0);
}

/* REMOVE this version */
// .survey-spinner {
//   width: 42px;
//   height: 42px;
//   border: 4px solid #ddd;
//   border-top-color: #333;
//   border-radius: 50%;
//   animation: spin 0.7s linear infinite;
// }

.survey-spinner {
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.survey-spinner::after {
  content: "";
  width: 42px;
  height: 42px;
  border: 4px solid #ddd;
  border-top-color: #333;
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}


// !VA Testing...
// [data-name="ManagementPrescriptionCost"]::after {
//   content: "";
//   display: block;
//   width: 100px;
//   height: 1px;
//   margin: .5rem auto 0; // centers horizontally
//   background: rgba(0, 0, 0, 0.2);
// }

